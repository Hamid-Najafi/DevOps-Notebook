<IfModule mod_ssl.c>
<VirtualHost *:443>
    ProxyPreserveHost On
    ProxyPass / http://127.0.0.1:5000/
    ProxyPassReverse / http://127.0.0.1:5000/
    ServerName payanak.legace.ir
    ErrorLog ${APACHE_LOG_DIR}payanak.legace.ir-error.log
    CustomLog ${APACHE_LOG_DIR}payanak.legace.ir-access.log common
    Include /etc/letsencrypt/options-ssl-apache.conf
    SSLCertificateFile /etc/letsencrypt/live/legace.ir/fullchain.pem
    SSLCertificateKeyFile /etc/letsencrypt/live/legace.ir/privkey.pem
</VirtualHost>
</IfModule>

<IfModule mod_ssl.c>
<VirtualHost *:443>
    ProxyPreserveHost On
    ProxyPass / http://127.0.0.1:5001/
    ProxyPassReverse / http://127.0.0.1:5001/
    ServerName lms.legace.ir
    ErrorLog ${APACHE_LOG_DIR}lms.legace.ir-error.log
    CustomLog ${APACHE_LOG_DIR}lms.legace.ir-access.log common
    Include /etc/letsencrypt/options-ssl-apache.conf
    SSLCertificateFile /etc/letsencrypt/live/legace.ir/fullchain.pem
    SSLCertificateKeyFile /etc/letsencrypt/live/legace.ir/privkey.pem
</VirtualHost>
</IfModule>

<IfModule mod_ssl.c>
<VirtualHost *:443>
    ProxyPreserveHost On
    ProxyPass / http://127.0.0.1:8081/
    ProxyPassReverse / http://127.0.0.1:8081/
    ServerName pgadmin.legace.ir
    ErrorLog ${APACHE_LOG_DIR}pgadmin.legace.ir-error.log
    CustomLog ${APACHE_LOG_DIR}pgadmin.legace.ir-access.log common
    Include /etc/letsencrypt/options-ssl-apache.conf
    SSLCertificateFile /etc/letsencrypt/live/legace.ir/fullchain.pem
    SSLCertificateKeyFile /etc/letsencrypt/live/legace.ir/privkey.pem
</VirtualHost>
</IfModule>

<IfModule mod_ssl.c>
<VirtualHost *:443>
    ProxyPreserveHost On
    ProxyPass / http://127.0.0.1:8082/
    ProxyPassReverse / http://127.0.0.1:8082/
    ServerName phpmyadmin.legace.ir
    ErrorLog ${APACHE_LOG_DIR}phpmyadmin.legace.ir-error.log
    CustomLog ${APACHE_LOG_DIR}phpmyadmin.legace.ir-access.log common
    Include /etc/letsencrypt/options-ssl-apache.conf
    SSLCertificateFile /etc/letsencrypt/live/legace.ir/fullchain.pem
    SSLCertificateKeyFile /etc/letsencrypt/live/legace.ir/privkey.pem
</VirtualHost>
</IfModule>

<IfModule mod_ssl.c>
<VirtualHost *:443>
    ProxyPreserveHost On
    ProxyPass / http://127.0.0.1:8083/
    ProxyPassReverse / http://127.0.0.1:8083/
    ServerName phpldapadmin.legace.ir
    ErrorLog ${APACHE_LOG_DIR}phpldapadmin.legace.ir-error.log
    CustomLog ${APACHE_LOG_DIR}phpldapadmin.legace.ir-access.log common
    Include /etc/letsencrypt/options-ssl-apache.conf
    SSLCertificateFile /etc/letsencrypt/live/legace.ir/fullchain.pem
    SSLCertificateKeyFile /etc/letsencrypt/live/legace.ir/privkey.pem
</VirtualHost>
</IfModule>

<IfModule mod_ssl.c>
<VirtualHost *:443>
    ProxyPreserveHost On
    ProxyPass / http://127.0.0.1:8084/
    ProxyPassReverse / http://127.0.0.1:8084/
    ServerName webmail.legace.ir
    ErrorLog ${APACHE_LOG_DIR}webmail.legace.ir-error.log
    CustomLog ${APACHE_LOG_DIR}webmail.legace.ir-access.log common
    Include /etc/letsencrypt/options-ssl-apache.conf
    SSLCertificateFile /etc/letsencrypt/live/legace.ir/fullchain.pem
    SSLCertificateKeyFile /etc/letsencrypt/live/legace.ir/privkey.pem
</VirtualHost>
</IfModule>

<IfModule mod_ssl.c>
<VirtualHost *:443>
    ProxyPreserveHost On
    AllowEncodedSlashes NoDecode
    ProxyPass /_matrix http://127.0.0.1:8008/_matrix nocanon
    ProxyPassReverse /_matrix http://127.0.0.1:8008/_matrix
    ServerName matrix.legace.ir
    ErrorLog ${APACHE_LOG_DIR}matrix.legace.ir-error.log
    CustomLog ${APACHE_LOG_DIR}matrix.legace.ir-access.log common
    Include /etc/letsencrypt/options-ssl-apache.conf
    SSLCertificateFile /etc/letsencrypt/live/legace.ir/fullchain.pem
    SSLCertificateKeyFile /etc/letsencrypt/live/legace.ir/privkey.pem
</VirtualHost>
</IfModule>

<IfModule mod_ssl.c>
<VirtualHost *:443>
    ProxyPreserveHost On
    ProxyPass / http://127.0.0.1:8085/
    ProxyPassReverse / http://127.0.0.1:8085/
    ServerName riot.legace.ir
    ErrorLog ${APACHE_LOG_DIR}riot.legace.ir-error.log
    CustomLog ${APACHE_LOG_DIR}riot.legace.ir-access.log common
    Include /etc/letsencrypt/options-ssl-apache.conf
    SSLCertificateFile /etc/letsencrypt/live/legace.ir/fullchain.pem
    SSLCertificateKeyFile /etc/letsencrypt/live/legace.ir/privkey.pem
</VirtualHost>
</IfModule>

<IfModule mod_ssl.c>
<VirtualHost *:443>
    ProxyPreserveHost On
    ProxyPass / http://127.0.0.1:8086/
    ProxyPassReverse / http://127.0.0.1:8086
    ServerName moodle.legace.ir
    ErrorLog ${APACHE_LOG_DIR}moodle.legace.ir-error.log
    CustomLog ${APACHE_LOG_DIR}moodle.legace.ir-access.log common
    Include /etc/letsencrypt/options-ssl-apache.conf
    SSLCertificateFile /etc/letsencrypt/live/legace.ir/fullchain.pem
    SSLCertificateKeyFile /etc/letsencrypt/live/legace.ir/privkey.pem
</VirtualHost>
</IfModule>

<IfModule mod_ssl.c>
<VirtualHost *:443>
    ProxyPreserveHost On
    ProxyPass / http://127.0.0.1:8087/
    ProxyPassReverse / http://127.0.0.1:8087
    ServerName gitlab.legace.ir
    ErrorLog ${APACHE_LOG_DIR}gitlab.legace.ir-error.log
    CustomLog ${APACHE_LOG_DIR}gitlab.legace.ir-access.log common
    Include /etc/letsencrypt/options-ssl-apache.conf
    SSLCertificateFile /etc/letsencrypt/live/legace.ir/fullchain.pem
    SSLCertificateKeyFile /etc/letsencrypt/live/legace.ir/privkey.pem
</VirtualHost>
</IfModule>

<IfModule mod_ssl.c>
<VirtualHost *:443>
    ProxyPreserveHost On
    ProxyPass / http://127.0.0.1:8088/
    ProxyPassReverse / http://127.0.0.1:8088
    ServerName 2048.legace.ir
    ErrorLog ${APACHE_LOG_DIR}2048.legace.ir-error.log
    CustomLog ${APACHE_LOG_DIR}2048.legace.ir-access.log common
    Include /etc/letsencrypt/options-ssl-apache.conf
    SSLCertificateFile /etc/letsencrypt/live/legace.ir/fullchain.pem
    SSLCertificateKeyFile /etc/letsencrypt/live/legace.ir/privkey.pem
</VirtualHost>
</IfModule>

<IfModule mod_ssl.c>
<VirtualHost *:443>
    ProxyPreserveHost On
    ProxyPass / http://127.0.0.1:9000/
    ProxyPassReverse / http://127.0.0.1:9000
    ServerName minio.legace.ir
    ErrorLog ${APACHE_LOG_DIR}minio.legace.ir-error.log
    CustomLog ${APACHE_LOG_DIR}minio.legace.ir-access.log common
    Include /etc/letsencrypt/options-ssl-apache.conf
    SSLCertificateFile /etc/letsencrypt/live/legace.ir/fullchain.pem
    SSLCertificateKeyFile /etc/letsencrypt/live/legace.ir/privkey.pem
</VirtualHost>
</IfModule>
